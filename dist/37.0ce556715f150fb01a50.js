(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{RzZf:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),o=function(){function e(){this.showFilter=!1,this.page=1,this.pageSize=10,this.pageOptions=[10,25,50,100]}return Object.defineProperty(e.prototype,"pageParams",{get:function(){return{pageNo:this.page,limit:this.pageSize}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchFilter",{get:function(){return{searchKey:this.search}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortHeaders",{get:function(){var e={};return this.sortKey&&(e={sortOrder:this.sortType,sortBy:this.sortKey}),e},enumerable:!0,configurable:!0}),e.prototype.confirmPageReload=function(){},e.prototype.allPrams=function(){return i.__assign({},this.pageParams,this.filterOptions,this.searchFilter,this.sortHeaders)},e.prototype.validateDeletion=function(){1!==this.total&&this.total-(this.page-1)*this.pageSize==1&&(this.page--,this.total--)},Object.defineProperty(e.prototype,"validPageOptions",{get:function(){for(var e=this.allPrams(),t={},n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];(e[o]||0===e[o])&&(t[o]=e[o])}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageOptionsOnChange",{set:function(e){this.page=e.pageIndex+1,this.pageSize=e.pageSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortOptions",{set:function(e){e.direction?(this.sortKey=e.active,this.sortType="asc"===e.direction?1:-1):(this.sortKey=null,this.sortType=null)},enumerable:!0,configurable:!0}),e.prototype.currentIndex=function(e){return this.page*this.pageSize+e+1},e.prototype.resetPages=function(){this.total=0,this.page=1},e.prototype.resetSearch=function(){this.searchKey=""},e.prototype.getSerialNumber=function(e){return e+(this.validPageOptions.pageNo-1)*this.validPageOptions.limit},e.prototype.changeDateFormat=function(e){for(var t in e)e[t]instanceof Date&&(e[t]=e[t].getTime());return e},e}()},b5gQ:function(e,t,n){"use strict";n.r(t);var i=n("mrSG"),o=n("CcnG"),r=n("ZYCi"),a=n("Ip0R"),s=n("buKM"),c=n("gIcY"),l=n("FTgb"),d=n("67Y/"),p=n("9Z1F"),u=n("XlPw"),h=n("iiAa"),m=n("vblm"),f=n("jRgp"),b=n("X11Z"),v=function(){function e(e,t,n,i,o){this._formService=e,this._formBuilder=t,this._http=n,this._uitilityService=i,this._fileUploadService=o}return e.prototype.createCabForm=function(){return this._formBuilder.group({vehicleName:this._formService.getControl("name"),registrationNo:this._formService.getControl("alphaNumeric"),employeeId:this._formService.getControl("alphaNumeric"),searchEmp:this._formService.getControl("dropdown"),type0:this._formService.getControl("name"),type1:this._formService.getControl("name"),type2:this._formService.getControl("name"),type3:this._formService.getControl("name"),type4:this._formService.getControl("name"),type5:this._formService.getControl("name"),type6:this._formService.getControl("name"),type7:this._formService.getControl("name"),type8:this._formService.getControl("name"),type9:this._formService.getControl("name")})},e.prototype.addCab=function(e){var t=this,n=e.cabId?"put":"post";return this._http[n](f.cb,e).pipe(Object(d.a)(function(n){return t._uitilityService.showAlert(m.b[e.cabId?"UPDATED":"ADDED"]("Vehicle")),n}),Object(p.a)(function(e){return Object(u.a)(e)}))},e.prototype.editCab=function(e){var t=this;return this._http.put(f.eb,e).pipe(Object(d.a)(function(n){return t._uitilityService.showAlert(m.b[e.cabId?"UPDATED":"ADDED"]("Vehicle")),n}),Object(p.a)(function(e){return Object(u.a)(e)}))},e.prototype.getEmployees=function(e){return this._http.get(f.ab,e)},e.prototype.getFilterForm=function(){return this._formBuilder.group(this._formService.getFilterFormControls(["fromDate","toDate","status","shiftName"]))},e.prototype.getCabDetail=function(e){return this._http.get(f.db,{vehicleId:e})},e.prototype.searchVendor=function(){return this._http.get(f.gb,!1)},e.prototype.showAlert=function(e){this._uitilityService.showAlert(e)},e.prototype.uploadFiles=function(e){return this._fileUploadService.uploadFiles(e)},e.prototype.checkRegistrationUnique=function(e){return this._http.get(f.O,e,!1)},e.prototype.checkBadgeUnique=function(e){return this._http.get(f.l,e,!1)},e.ctorParameters=function(){return[{type:s.a},{type:c.d},{type:l.a},{type:h.a},{type:b.a}]},e=i.__decorate([Object(o.Injectable)(),i.__metadata("design:paramtypes",[s.a,c.d,l.a,h.a,b.a])],e)}(),g=n("Oy5v"),y=n("Gi3i"),_=n("ad02"),x=n("yG5I"),C=function(e){function t(t,n,i,o){var r=e.call(this)||this;return r._cabAddService=t,r._router=n,r._route=i,r._uitilityService=o,r.vendors=[],r.fuelType=x.f,r.transmissionType=x.q,r.carType=x.a,r.radioOption=x.l,r.selected="",r.containers=[],r.vehicleNameArray=[],r.vehicleTypeArray=[],r.vehicleRegNoArray=[],r.vehicleData=[],r.createForm(),r.createFilterForm(),r}return i.__extends(t,e),t.prototype.ngOnInit=function(){var e=this;this.cabId=this._route.snapshot.params.cabId,this.cabId?(this.getCabDetail(),setTimeout(function(){e.editVehicleDiv()},1e3)):this.containers.push(this.containers.length)},t.prototype.createFilterForm=function(){this.filterForm=this._cabAddService.getFilterForm()},t.prototype.addVehicleDiv=function(){if(this.containers.length!=x.i)if(this.containers.length>0){var e=document.getElementsByName("vehicleName")[this.containers.length-1],t=document.getElementsByName("registrationNo")[this.containers.length-1];if(""==e.value||null==e.value||""==t.value||null==t.value||this.cabForm.controls["type"+(this.containers.length-1)].invalid)return;this.containers.push(this.containers.length)}else this.containers.push(this.containers.length);else this._uitilityService.showAlert(m.c)},t.prototype.removeVehicleDiv=function(e){var t=this.containers.indexOf(e);this.containers.splice(t,1),this.vehicleData.splice(t,1),console.log(this.vehicleData)},t.prototype.type=function(e){this.vehicleTypeArray.push(e.value)},t.prototype.editVehicleDiv=function(){this.cabForm.controls.vehicleName.setValue(this.cabDetail.modal),this.cabForm.controls.registrationNo.setValue(this.cabDetail.regNo),this.cabForm.controls.type0.setValue(this.cabDetail.vehicleType)},t.prototype.onAdd=function(){this.vehicleData.length=0,this.vehicleNameArray.length=0,this.vehicleRegNoArray.length=0;for(var e=0;e<this.containers.length;e++){var t=document.getElementsByName("vehicleName")[e];this.vehicleNameArray.push(t.value)}for(e=0;e<this.containers.length;e++){t=document.getElementsByName("registrationNo")[e];this.vehicleRegNoArray.push(t.value)}for(e=0;e<this.containers.length;e++){var n={modal:this.vehicleNameArray[e],vehicleType:this.vehicleTypeArray[e],regNo:this.vehicleRegNoArray[e]};this.vehicleData.push(n)}},t.prototype.searchEmp=function(e){this.search=e,this.resetPages(),this.getEmployees()},t.prototype.getEmployees=function(){var e=this,t=i.__assign({},this.changeDateFormat(this.filterForm.value),this.validPageOptions,{limit:10});this._cabAddService.getEmployees(t).subscribe(function(t){e.employeeSearchData=t.data.userList,e.total=t.data.totalCount},function(e){})},t.prototype.validateRegNo=function(){var e=this;this.cabForm.controls.registrationNo.valueChanges.pipe(Object(y.a)(800),Object(_.a)()).subscribe(function(t){t&&t.length>=3&&e.checkRegistrationUnique(t)})},t.prototype.checkRegistrationUnique=function(e){var t=this,n=e.trim();this._cabAddService.checkRegistrationUnique({registrationNo:n}).subscribe(function(e){e&&200==e.statusCode?t.isSubUniqueMsg=null:e&&400==e.statusCode&&(t.cabForm.controls.registrationNo.setErrors({incorrect:!0}),t.isSubUniqueMsg="Registration number must be unique")})},t.prototype.validateBadgeNo=function(){var e=this;this.cabForm.controls.routeNo.valueChanges.pipe(Object(y.a)(800),Object(_.a)()).subscribe(function(t){t&&t.length>=3&&e.checkBadgeUnique(t)})},t.prototype.checkBadgeUnique=function(e){var t=this,n=e.trim();this._cabAddService.checkBadgeUnique({routeNo:n}).subscribe(function(e){e&&200==e.statusCode?t.isBadgeUniqueMsg=null:e&&400==e.statusCode&&(t.cabForm.controls.routeNo.setErrors({incorrect:!0}),t.isBadgeUniqueMsg="Badge number must be unique")})},t.prototype.createForm=function(){this.cabForm=this._cabAddService.createCabForm()},t.prototype.trimColor=function(){this.getControl("color").setValue(this.getControl("color").value.trim())},t.prototype.searchVendor=function(){var e=this;this._cabAddService.searchVendor().subscribe(function(t){t&&200==t.statusCode&&(e.vendors=t.data)})},t.prototype.selectVendor=function(e){this.selectedVendorId=e.option.value._id},t.prototype.getCabDetail=function(){var e=this;this._cabAddService.getCabDetail(this.cabId).subscribe(function(t){e.cabDetail=t.data,e.employeeData=t.data1,console.log(e.cabDetail),e.cabId&&(e.containers.push(e.containers.length),e.cabForm.controls.employeeId.disable()),e.patchValue(t.data)},function(t){e._router.navigate([g.VEHICLE])})},t.prototype.patchValue=function(e){var t={employeeId:this.employeeData.employeeId};this.cabForm.patchValue(t)},t.prototype.getControl=function(e){return this.cabForm.controls[e]},t.prototype.getFileName=function(e){return Object(x.s)(e)},t.prototype.addCab=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t=this;return i.__generator(this,function(n){return e={employeeId:this.cabForm.controls.employeeId.value,vehicles:[]},this.cabForm.controls.employeeId.invalid||this.cabForm.controls.vehicleName.invalid||this.cabForm.controls.registrationNo.invalid||this.cabForm.controls.type0.invalid||this.cabForm.disabled?[2]:0==this.vehicleData.length?[2]:(this.cabForm.disable(),this.cabId?(e.vehicleId=this.cabId,e.modal=this.vehicleData[0].modal,e.regNo=this.vehicleData[0].regNo,e.vehicleType=this.cabForm.controls.type0.value):e.vehicles=this.vehicleData,console.log(e),console.log(this.vehicleData),this.cabId?this._cabAddService.editCab(e).subscribe(function(e){t._router.navigate([g.VEHICLE])},function(e){t.cabForm.enable()}):this._cabAddService.addCab(e).subscribe(function(e){t._router.navigate([g.VEHICLE])},function(e){t.cabForm.enable()}),[2])})})},t.ctorParameters=function(){return[{type:v},{type:r.d},{type:r.a},{type:h.a}]},t=i.__decorate([Object(o.Component)({selector:"app-vehicle-add",template:n("nc0r"),changeDetection:o.ChangeDetectionStrategy.OnPush,styles:[n("cNYQ")]}),i.__metadata("design:paramtypes",[v,r.d,r.a,h.a])],t)}(n("RzZf").a),N=n("4tE/"),I=n("UodH"),F=n("Wf4p"),S=n("seP3"),w=n("SMsm"),D=n("b716"),A=n("9It4"),O=n("uGex"),V=n("3V+5"),E=n("FpXt"),j=n("VWX5"),k=n("IKo7");n.d(t,"VehicleAddModule",function(){return P});var P=function(){function e(){}return e=i.__decorate([Object(o.NgModule)({declarations:[C],imports:[a.c,S.c,D.b,A.a,I.a,c.n,V.a,E.a,j.b,j.c,k.a,N.a,F.p,O.a,w.a,r.e.forChild([{path:"",component:C}])],providers:[v]})],e)}()},cNYQ:function(e,t){e.exports='@charset "UTF-8";\nlabel.attach {\n  position: absolute;\n  right: 0px;\n  top: 10px;\n  z-index: 9;\n  cursor: pointer;\n  background: #fff;\n}\n.medical_cab_symbol {\n  background: url(\'medicalCab.b74564dea42f4dbe3917.png\') left/contain no-repeat;\n  white-space: nowrap;\n  background-position: 90% 50%;\n}\n.medical_cab_symbol_option {\n  float: right;\n  margin-top: 15px;\n}\n.upload_img {\n  width: 200px;\n  height: 200px;\n  overflow: hidden;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  position: relative;\n  margin: 0 auto;\n}\n.upload_img img {\n  width: 200px;\n  height: 200px;\n  -o-object-fit: cover;\n     object-fit: cover;\n}\n.upload-icon {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  background: #606060;\n  padding: 5px 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 6px 6px 0 0;\n  color: #fff;\n  cursor: pointer;\n}\n.flex_row {\n  display: flex;\n  margin: 0 -10px;\n  align-items: center;\n}\n.breadcrumb {\n  width: 100%;\n  padding: 5px 15px;\n}\n.breadcrumb li {\n  display: inline-block;\n}\n.breadcrumb li a {\n  color: #006CB8;\n  text-decoration: none;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 400;\n  outline: none;\n}\n.breadcrumb li a:before {\n  padding: 0 5px;\n  color: #B7BEC1;\n  content: "/ ";\n}\n.breadcrumb li a:after {\n  content: "/\xa0";\n  padding: 0 2px;\n  color: #A2ABAE;\n}\n.breadcrumb li a.active {\n  color: #262c2d;\n  cursor: default;\n}\n.breadcrumb li a.active:after {\n  display: none;\n}\n.breadcrumb li:first-child a:before, .breadcrumb li:first-child a:after, .breadcrumb li:last-child a:before, .breadcrumb li:last-child a:after {\n  display: none;\n}\nbutton.mat-raised-button {\n  box-shadow: none !important;\n  border: 1px solid #0069FF !important;\n  min-width: 104px !important;\n}\n:host ::ng-deep .disabled {\n  opacity: 0.5;\n  cursor: initial;\n}\n:host ::ng-deep .disabled .mat-form-field-flex:hover .mat-form-field-outline-start,\n:host ::ng-deep .disabled .mat-form-field-flex:hover .mat-form-field-outline-end,\n:host ::ng-deep .disabled .mat-form-field-flex:hover .mat-form-field-outline-gap {\n  border-width: 1px !important;\n  border-color: #e0e0e0 !important;\n}\n.sectionHeader {\n  background-color: whitesmoke;\n  margin-bottom: 40px;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  padding-left: 20px;\n}\n.alignRight {\n  margin-left: auto;\n}\n.flex {\n  display: flex;\n}'},nc0r:function(e,t){e.exports='<div class="custom_container">\n    <div class="white_wrapper">\n        <h2 class="heading">{{cabId?\'Edit\':\'Add\'}} Vehicle</h2>\n        <div class="flex_row">\n            <ul class="breadcrumb">\n                \x3c!-- <li>\n                    <a href="javascript:void(0)">Home</a>\n                </li> --\x3e\n                <li>\n                    <a routerLink="/admin/vehicle/list">Vehicle /&nbsp;</a>\n                </li>\n                <li>\n                    <a href="javascript:void(0)" class="active">{{cabId?\'Edit\':\'Add\'}}</a>\n                </li>\n            </ul>\n        </div>\n        <form [formGroup]="cabForm" #form="ngForm" (ngSubmit)="addCab()">\n            <div class="form_wrapper">\n               \n                <div>\n\n                    <div class="flex_row sectionHeader">\n\n                        <div class="flex_col_sm_5">\n                            <div>\n                                <h3>Employee Details</h3>\n                            </div>\n                        </div>\n\n                    </div>\n\n                    <div class="flex_row">\n                        <div *ngIf="cabId" class="flex_col_sm_5">\n                            <div class="form_filed_wrapper">\n                                <mat-form-field appearance="outline">\n                                    <mat-label>Employee ID</mat-label>\n                                    <input formControlName="employeeId" matInput>\n                                    <mat-error>{{getControl(\'employeeId\')|validate:\'Model Name\'}}</mat-error>\n                                </mat-form-field>\n                            </div>\n                        </div>\n\n                        <div *ngIf="!cabId" class="flex_col_sm_5">\n                            <div class="form_filed_wrapper">\n                                <mat-form-field appearance="outline">\n                                    <mat-label>Employee ID</mat-label>\n                                <input type="text"\n                                placeholder="Search by Employee ID"\n                                aria-label="Number"\n                                matInput\n                                (ngModelChange)="searchEmp($event)"\n                                formControlName="employeeId"\n                                [matAutocomplete]="auto">\n                                <mat-error>{{getControl(\'employeeId\')|validate:\'Model Name\'}}</mat-error>\n                                </mat-form-field>\n                                \n                         <mat-autocomplete #auto="matAutocomplete">\n                           <mat-option *ngFor="let option of employeeSearchData" [value]="option.employeeId">\n                             {{option.employeeId}}\n                           </mat-option>\n                         </mat-autocomplete>\n                      </div>\n                      </div>\n\n                    </div>\n\n\n\n\n                    <div class="flex_row sectionHeader">\n\n                        <div class="flex_col_sm_5">\n                            <div>\n                                <h3>Vehicle Details</h3>\n                            </div>\n                        </div>\n\n                        <div class="flex_col_sm_5 flex">\n\n                            <div class="alignRight">\n                                <button *ngIf="!cabId" mat-raised-button type="button" (click)="addVehicleDiv()">\n                                    <mat-icon>add</mat-icon> Add Vehicle\n                                </button>\n                            </div>\n\n                        </div>\n                    </div>\n\n\n\n                    <div id="contentInside" *ngFor="let container of containers">\n                        <div class="flex">\n\n                            <div class="alignRight">\n                                    <mat-icon *ngIf="!cabId" style="color: red; cursor: pointer;" (click)="removeVehicleDiv(container)">clear</mat-icon>\n                            </div>\n\n                        </div>\n\n\n                        <div class="flex_row">\n                            <div class="flex_col_sm_5">\n                                <div class="form_filed_wrapper">\n                                    <mat-form-field appearance="outline">\n                                        <mat-label>Model Name</mat-label>\n                                        <input name="vehicleName" value="" class="form-control" formControlName="vehicleName" matInput>\n                                        <mat-error>{{getControl(\'vehicleName\')|validate:\'Model Name\'}}</mat-error>\n                                    </mat-form-field>\n                                </div>\n                            </div>\n\n                            <div class="flex_col_sm_5">\n                                <div class="form_filed_wrapper">\n                                    <mat-form-field appearance="outline">\n                                        <mat-label name="labelHolder">Vehicle Type</mat-label>\n                                        \x3c!-- Added  ngClass & ngModelChange - Shivakumar A --\x3e\n                                        <mat-select name="type" class="form-control" formControlName="type{{container}}" (selectionChange)="type($event)" placeholder="Vehicle Type"\n                                            [ngClass]="selected">\n                                          \n                                            <mat-option *ngFor="let type of carType" [value]="type.value">\n                                                {{type.viewValue}}\n                                                \x3c!-- Added Medical Cab Symbol - Shivakumar A\n                                                <img class="medical_cab_symbol_option"\n                                                    *ngIf="type.viewValue === medicalCabValue"\n                                                    src="assets/images/medicalCab.png" /> --\x3e\n                                            </mat-option>\n                                        </mat-select>\n                                        <mat-error>{{getControl(\'type\')|validate:\'Vehicle Type\'}}\n                                        </mat-error>\n                                    </mat-form-field>\n                                </div>\n                            </div>\n\n\n                        </div>\n\n                        <div class="flex_row">\n\n                            <div class="flex_col_sm_5">\n                                <div class="form_filed_wrapper">\n\n                                    <mat-form-field appearance="outline">\n                                        <mat-label>Registration Number</mat-label>\n                                        <input  name="registrationNo" value="" class="form-control" formControlName="registrationNo" matInput>\n                                        <mat-error>{{getControl(\'registrationNo\')|validate:\'Registration Number\'}}\n                                        </mat-error>\n                                        <mat-error *ngIf="isSubUniqueMsg">{{isSubUniqueMsg }}</mat-error>\n                                    </mat-form-field>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                \n                <div class="flex-row">\n                    <span class="alert-message">All fields are Mandatory</span>\n                </div>\n                <div class="flex_row">\n                    <div class="flex_col_sm_10">\n                        <div class="form_filed_wrapper text-center">\n                            <ul class="btn_wrapper">\n                                <li> <button mat-raised-button type="button" [routerLink]="\'VEHICLE\'|absolutePath">Cancel</button>\n                                </li>\n                                <li> <button mat-raised-button (click)="onAdd()" color="primary">{{cabId?\'Update\':\'Add\'}}</button> </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n        </form>\n    </div>\n</div>'},vubp:function(e,t,n){"use strict";var i=n("mrSG"),o=n("T1DM");var r=n("FFOo"),a=n("60iU");function s(e,t){void 0===t&&(t=o.a);var n,i=(n=e)instanceof Date&&!isNaN(+n)?+e-t.now():Math.abs(e);return function(e){return e.lift(new c(i,t))}}n.d(t,"a",function(){return s});var c=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.delay,this.scheduler))},e}(),l=function(e){function t(t,n,i){var o=e.call(this,t)||this;return o.delay=n,o.scheduler=i,o.queue=[],o.active=!1,o.errored=!1,o}return i.__extends(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,i=e.scheduler,o=e.destination;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(o);if(n.length>0){var r=Math.max(0,n[0].time-i.now());this.schedule(e,r)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new d(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(a.a.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(a.a.createComplete()),this.unsubscribe()},t}(r.a),d=function(){return function(e,t){this.time=e,this.notification=t}}()}}]);